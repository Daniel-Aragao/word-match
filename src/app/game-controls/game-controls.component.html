<!-- 
reset
tip
language

-->
<div class="flex flex-col items-center justify-center gap-2">
  <p class="text-xl">Word Match</p>
  <div class="flex items-center justify-center gap-2 p-2">
    <button
      class="control-group"
      [class.open]="isWordOfTheDayOpen() || !gameStore.isDailyGameCompleted()"
      [class.closed]="!isWordOfTheDayOpen() && gameStore.isDailyGameCompleted()"
    >
      <app-icon
        iconName="EarlyOn"
        (click)="isWordOfTheDayOpen.set(!isWordOfTheDayOpen())"
      />
      @if (gameStore.isDailyGameCompleted() || gameStore.isDailyGameActive()) {
        <div
          class="duration"
          [class.failed]="failedDaily()"
          [class.succeeded]="succeededDaily()"
        >
          {{ gameOfTheDayDuration() | duration }}
        </div>
      } @else {
        <button class="key" (click)="startGameOfTheDay()">
          <app-icon iconName="TimerPlay" />
        </button>
      }
    </button>
    <div
      class="control-group"
      [class.open]="isGameMenuOpen()"
      [class.closed]="!isGameMenuOpen()"
    >
      <app-icon
        iconName="Controller"
        (click)="isGameMenuOpen.set(!isGameMenuOpen())"
      />
      <button
        class="key"
        (click)="gameStore.newWord(); $event.stopPropagation()"
      >
        <app-icon iconName="Refresh" />
      </button>
      <button
        class="key"
        (click)="gameStore.giveUp(); $event.stopPropagation()"
      >
        <app-icon iconName="Visibility" />
      </button>
    </div>
    <div
      class="control-group"
      [class.open]="isLanguageSelectorOpen()"
      [class.ajar]="!isLanguageSelectorOpen()"
    >
      <app-icon iconName="Language" (click)="toggleLanguageSelector()" />
      @for (language of languages(); track language) {
        @let isActive = this.gameStore.language() === language.code;
        <button
          class="key"
          [class.active]="isActive"
          (click)="selectLanguage(language.code, $event)"
        >
          {{ language.label }}
        </button>
      }
    </div>
  </div>
  @let answer = gameStore.answer();

  @if (answer) {
    <div class="flex gap-1">
      <app-icon iconName="Check" />
      <p>
        {{ answer.word }}
      </p>
    </div>
  }
</div>
